<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ayleen Book</title>
    
    
    <meta name="theme-color" content="#f3f4f6"/>
    <link rel="apple-touch-icon" href="https."
    <link rel="manifest" href="manifest.json">
    

<script src="https://cdn.tailwindcss.com"></script>
    <style>
        html, body {
            height: 100%;
            margin: 0;
            font-family: 'Inter', sans-serif;
            -webkit-tap-highlight-color: transparent;
            overflow: hidden; /* Pastikan tidak ada scroll */
        }
        #flashcard:focus {
            outline: none;
        }

        /* --- Keyframes untuk Animasi --- */
        @keyframes pop {
            0% { transform: scale(0.9); opacity: 0.5; }
            100% { transform: scale(1.0); opacity: 1; }
        }
        
        @keyframes jiggle {
            0%, 100% { transform: rotate(0deg); }
            25% { transform: rotate(-8deg) scale(1.1); }
            75% { transform: rotate(8deg) scale(1.1); }
        }

        @keyframes breathe {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        @keyframes sparkle-burst {
            0% {
                transform: scale(0.5) rotate(0deg);
                opacity: 1;
            }
            100% {
                transform: scale(1.5) rotate(90deg) translateY(-20px);
                opacity: 0;
            }
        }
        .sparkle {
            position: absolute;
            pointer-events: none;
            z-index: 99;
            animation: sparkle-burst 0.5s ease-out forwards;
        }


        /* --- Kelas Helper untuk Animasi --- */
        .animate-pop {
            animation: pop 0.2s ease-out;
        }
        .animate-jiggle {
            animation: jiggle 0.4s ease-in-out;
        }
        .animate-breathe {
            animation: breathe 3s ease-in-out infinite;
        }

        .hidden-screen {
            display: none !important;
        }

        /* --- Animasi Bunga --- */
        @keyframes fall {
            0% { transform: translateY(-10vh); opacity: 1; }
            100% { transform: translateY(110vh); opacity: 1; }
        }
        .flower {
            position: absolute;
            top: -10vh; 
            animation: fall linear infinite;
            pointer-events: none;
            opacity: 0.7;
        }

    </style>
</head>
<body class="bg-white flex flex-col h-screen select-none">

    
    <div id="flower-container" class="absolute top-0 left-0 w-full h-full overflow-hidden pointer-events-none z-10"></div>

    
    <div class="flex-shrink-0 p-4 pb-0
                bg-gradient-to-r from-pink-200 to-rose-200
                text-rose-700 text-3xl font-extrabold shadow-md
                flex justify-center items-center relative z-30"> 
        <span class="flex items-center space-x-2">
            <span class="text-5xl">ü¶Ñ</span>
            <span class="text-5xl">üë∏</span>
            <span>Ayleen Book</span>
            <span class="text-5xl">üå∏</span>
            <span class="text-5xl">üë∂</span>
        </span>
    </div>

    <!-- Layar Utama (Home Screen) -->
    <div id="home-screen" class="flex-grow flex flex-col items-center justify-center p-4 relative z-20 overflow-y-auto">
        <div id="home-menu-container" class="grid grid-cols-2 sm:grid-cols-3 gap-4 w-full max-w-2xl">
            <!-- Tombol Kategori Besar akan dibuat oleh JavaScript di sini -->
        </div>
    </div>

    <!-- Layar Kartu (Card Screen) -->
    <div id="card-screen" class="flex-grow flex items-center justify-center p-4 relative z-20 hidden-screen"> 
        
        <button id="back-button" class="absolute top-4 left-4 z-50 p-3 rounded-full bg-white shadow-md text-gray-700 hover:bg-gray-100 transition-colors focus:outline-none focus:ring-2 focus:ring-blue-400">
            <span class="text-2xl">üè†</span>
        </button>
        
        <div id="flashcard"
             tabindex="0"
             role="button"
             aria-label="Klik untuk kartu berikutnya"
             class="w-11/12 md:w-3/4 lg:w-1/2
                    flex flex-col items-center justify-around py-10 
                    rounded-3xl shadow-2xl cursor-pointer
                    transition-all duration-300 ease-in-out
                    transform active:scale-95
                    relative"> 

            <div id="emoji-display" class="text-9xl sm:text-[12rem] md:text-[15rem] lg:text-[20rem] animate-breathe"></div>
            
            <div id="text-display" class="text-3xl sm:text-4xl md:text-5xl lg:text-6xl font-bold mt-8"></div>
        </div>
    </div>


    <script>
        
        document.addEventListener('DOMContentLoaded', () => {

            // --- 1. Ambil Elemen ---
            const homeScreen = document.getElementById('home-screen');
            const cardScreen = document.getElementById('card-screen');
            const homeMenuContainer = document.getElementById('home-menu-container');
            const backButton = document.getElementById('back-button');
            
            const cardElement = document.getElementById('flashcard');
            const emojiElement = document.getElementById('emoji-display');
            const textElement = document.getElementById('text-display');
            const flowerContainer = document.getElementById('flower-container');
            
            // --- 2. Cek Elemen Penting ---
            if (!homeScreen || !cardScreen || !homeMenuContainer || !backButton || !cardElement || !flowerContainer) {
                console.error("Kesalahan Kritis: Satu atau lebih elemen UI utama tidak ditemukan.");
                return; // Berhenti jika UI rusak
            }

            // --- 3. Data ---
            const decks = {
                hewan: [
                    { emoji: 'üêÆ', text: 'Sapi', bgColor: 'bg-blue-300', textColor: 'text-blue-900' },
                    { emoji: 'üê±', text: 'Kucing', bgColor: 'bg-yellow-300', textColor: 'text-yellow-900' },
                    { emoji: 'üê∂', text: 'Anjing', bgColor: 'bg-green-300', textColor: 'text-green-900' },
                    { emoji: 'ü¶Ü', text: 'Bebek', bgColor: 'bg-orange-300', textColor: 'text-orange-900' },
                    { emoji: 'üêò', text: 'Gajah', bgColor: 'bg-gray-300', textColor: 'text-gray-900' },
                    { emoji: 'üêí', text: 'Monyet', bgColor: 'bg-amber-300', textColor: 'text-amber-900' },
                    { emoji: 'üêî', text: 'Ayam', bgColor: 'bg-red-300', textColor: 'text-red-900' },
                    { emoji: 'üê†', text: 'Ikan', bgColor: 'bg-cyan-300', textColor: 'text-cyan-900' },
                    { emoji: 'üêé', text: 'Kuda', bgColor: 'bg-lime-300', textColor: 'text-lime-900' },
                    { emoji: 'üê¶', text: 'Burung', bgColor: 'bg-purple-300', textColor: 'text-purple-900' },
                    { emoji: 'üêë', text: 'Domba', bgColor: 'bg-pink-300', textColor: 'text-pink-900' },
                    { emoji: 'üêê', text: 'Kambing', bgColor: 'bg-indigo-300', textColor: 'text-indigo-900' },
                    { emoji: 'üê∑', text: 'Babi', bgColor: 'bg-rose-300', textColor: 'text-rose-900' },
                    { emoji: 'üêú', text: 'Semut', bgColor: 'bg-teal-300', textColor: 'text-teal-900' },
                    { emoji: 'üêù', text: 'Lebah', bgColor: 'bg-yellow-300', textColor: 'text-yellow-900' },
                    { emoji: 'üê∏', text: 'Katak', bgColor: 'bg-green-300', textColor: 'text-green-900' },
                    { emoji: 'ü¶Å', text: 'Singa', bgColor: 'bg-orange-300', textColor: 'text-orange-900' }
                ],
                warna: [
                    { emoji: 'üü•', text: 'Merah', bgColor: 'bg-red-300', textColor: 'text-red-900' },
                    { emoji: 'üü©', text: 'Hijau', bgColor: 'bg-green-300', textColor: 'text-green-900' },
                    { emoji: 'üü¶', text: 'Biru', bgColor: 'bg-blue-300', textColor: 'text-blue-900' },
                    { emoji: 'üü®', text: 'Kuning', bgColor: 'bg-yellow-300', textColor: 'text-yellow-900' },
                    { emoji: 'üüß', text: 'Oranye', bgColor: 'bg-orange-300', textColor: 'text-orange-900' },
                    { emoji: 'üü™', text: 'Ungu', bgColor: 'bg-purple-300', textColor: 'text-purple-900' },
                    { emoji: '‚¨õÔ∏è', text: 'Hitam', bgColor: 'bg-gray-700', textColor: 'text-gray-100' },
                    { emoji: '‚¨úÔ∏è', text: 'Putih', bgColor: 'bg-gray-100', textColor: 'text-gray-900' },
                    { emoji: 'üü´', text: 'Cokelat', bgColor: 'bg-yellow-700', textColor: 'text-yellow-100' },
                    { emoji: 'üå∏', text: 'Pink', bgColor: 'bg-pink-300', textColor: 'text-pink-900' },
                    { emoji: 'üêò', text: 'Abu-abu', bgColor: 'bg-gray-400', textColor: 'text-gray-900' }
                ],
                angka: [
                    { emoji: '1Ô∏è‚É£', text: 'Satu', bgColor: 'bg-sky-300', textColor: 'text-sky-900' },
                    { emoji: '2Ô∏è‚É£', text: 'Dua', bgColor: 'bg-lime-300', textColor: 'text-lime-900' },
                    { emoji: '3Ô∏è‚É£', text: 'Tiga', bgColor: 'bg-pink-300', textColor: 'text-pink-900' },
                    { emoji: '4Ô∏è‚É£', text: 'Empat', bgColor: 'bg-amber-300', textColor: 'text-amber-900' },
                    { emoji: '5Ô∏è‚É£', text: 'Lima', bgColor: 'bg-teal-300', textColor: 'text-teal-900' },
                    { emoji: '6Ô∏è‚É£', text: 'Enam', bgColor: 'bg-indigo-300', textColor: 'text-indigo-900' },
                    { emoji: '7Ô∏è‚É£', text: 'Tujuh', bgColor: 'bg-rose-300', textColor: 'text-rose-900' },
                    { emoji: '8Ô∏è‚É£', text: 'Delapan', bgColor: 'bg-emerald-300', textColor: 'text-emerald-900' },
                    { emoji: '9Ô∏è‚É£', text: 'Sembilan', bgColor: 'bg-fuchsia-300', textColor: 'text-fuchsia-900' },
                    { emoji: 'üîü', text: 'Sepuluh', bgColor: 'bg-orange-300', textColor: 'text-orange-900' }
                ],
                benda: [
                    { emoji: 'üöó', text: 'Mobil', bgColor: 'bg-red-300', textColor: 'text-red-900' },
                    { emoji: '‚öΩÔ∏è', text: 'Bola', bgColor: 'bg-purple-300', textColor: 'text-purple-900' },
                    { emoji: 'üå≥', text: 'Pohon', bgColor: 'bg-lime-300', textColor: 'text-lime-900' },
                    { emoji: 'üçé', text: 'Apel', bgColor: 'bg-pink-300', textColor: 'text-pink-900' },
                    { emoji: '‚òÄÔ∏è', text: 'Matahari', bgColor: 'bg-amber-300', textColor: 'text-amber-900' },
                    { emoji: 'üåô', text: 'Bulan', bgColor: 'bg-indigo-300', textColor: 'text-indigo-900' },
                    { emoji: 'üè†', text: 'Rumah', bgColor: 'bg-cyan-300', textColor: 'text-cyan-900' },
                    { emoji: 'üå∏', text: 'Bunga', bgColor: 'bg-rose-300', textColor: 'text-rose-900' },
                    { emoji: 'üìñ', text: 'Buku', bgColor: 'bg-blue-300', textColor: 'text-blue-900' },
                    { emoji: 'üëü', text: 'Sepatu', bgColor: 'bg-green-300', textColor: 'text-green-900' },
                    { emoji: 'ü•Ñ', text: 'Sendok', bgColor: 'bg-gray-300', textColor: 'text-gray-900' },
                    { emoji: 'ü•õ', text: 'Susu', bgColor: 'bg-gray-100', textColor: 'text-gray-900' }
                ],
                buah: [
                    { emoji: 'üçå', text: 'Pisang', bgColor: 'bg-yellow-300', textColor: 'text-yellow-900' },
                    { emoji: 'üçä', text: 'Jeruk', bgColor: 'bg-orange-300', textColor: 'text-orange-900' },
                    { emoji: 'üçâ', text: 'Semangka', bgColor: 'bg-red-300', textColor: 'text-red-900' },
                    { emoji: 'üçá', text: 'Anggur', bgColor: 'bg-purple-300', textColor: 'text-purple-900' },
                    { emoji: 'üçì', text: 'Stroberi', bgColor: 'bg-pink-300', textColor: 'text-pink-900' },
                    { emoji: 'üçç', text: 'Nanas', bgColor: 'bg-yellow-400', textColor: 'text-yellow-900' }
                ],
                tubuh: [
                    { emoji: 'üëÅÔ∏è', text: 'Mata', bgColor: 'bg-sky-300', textColor: 'text-sky-900' },
                    { emoji: 'üëÉ', text: 'Hidung', bgColor: 'bg-pink-300', textColor: 'text-pink-900' },
                    { emoji: 'üëÑ', text: 'Mulut', bgColor: 'bg-red-300', textColor: 'text-red-900' },
                    { emoji: 'üëÇ', text: 'Telinga', bgColor: 'bg-yellow-300', textColor: 'text-yellow-900' },
                    { emoji: 'üñêÔ∏è', text: 'Tangan', bgColor: 'bg-orange-300', textColor: 'text-orange-900' },
                    { emoji: 'ü¶∂', text: 'Kaki', bgColor: 'bg-green-300', textColor: 'text-green-900' },
                    { emoji: 'ü¶∑', text: 'Gigi', bgColor: 'bg-gray-100', textColor: 'text-gray-900' }
                ],
                bentuk: [
                    { emoji: 'üîµ', text: 'Lingkaran', bgColor: 'bg-blue-300', textColor: 'text-blue-900' },
                    { emoji: 'üî∫', text: 'Segitiga', bgColor: 'bg-red-300', textColor: 'text-red-900' },
                    { emoji: 'üü¶', text: 'Kotak', bgColor: 'bg-green-300', textColor: 'text-green-900' },
                    { emoji: '‚≠ê', text: 'Bintang', bgColor: 'bg-yellow-300', textColor: 'text-yellow-900' },
                    { emoji: '‚ù§Ô∏è', text: 'Hati', bgColor: 'bg-pink-300', textColor: 'text-pink-900' }
                ],
                huruf: [] 
            };
            const alphabet = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ';
            const colors = [
                { bg: 'bg-red-300', text: 'text-red-900' },
                { bg: 'bg-blue-300', text: 'text-blue-900' },
                { bg: 'bg-green-300', text: 'text-green-900' },
                { bg: 'bg-yellow-300', text: 'text-yellow-900' },
                { bg: 'bg-purple-300', text: 'text-purple-900' },
                { bg: 'bg-orange-300', text: 'text-orange-900' },
                { bg: 'bg-pink-300', text: 'text-pink-900' },
                { bg: 'bg-teal-300', text: 'text-teal-900' }
            ];
            for (let i = 0; i < alphabet.length; i++) {
                const char = alphabet[i];
                const color = colors[i % colors.length];
                decks.huruf.push({
                    emoji: char,
                    text: char,
                    bgColor: color.bg,
                    textColor: color.text
                });
            }
            const allColorClasses = Object.values(decks).flat().flatMap(c => [c.bgColor, c.textColor]);
            
            // Konfigurasi tombol untuk Layar Utama
            const buttonConfig = {
                hewan: { icon: 'üê∂', label: 'Hewan', color: 'bg-blue-200', text: 'text-blue-800' },
                warna: { icon: 'üé®', label: 'Warna', color: 'bg-pink-200', text: 'text-pink-800' },
                angka: { icon: '1Ô∏è‚É£', label: 'Angka', color: 'bg-green-200', text: 'text-green-800' },
                huruf: { icon: 'A', label: 'Huruf', color: 'bg-purple-200', text: 'text-purple-800' },
                benda: { icon: 'üöó', label: 'Benda', color: 'bg-red-200', text: 'text-red-800' },
                buah: { icon: 'üçâ', label: 'Buah', color: 'bg-yellow-200', text: 'text-yellow-800' },
                tubuh: { icon: 'üñêÔ∏è', label: 'Tubuh', color: 'bg-orange-200', text: 'text-orange-800' },
                bentuk: { icon: 'üîµ', label: 'Bentuk', color: 'bg-indigo-200', text: 'text-indigo-800' },
                cilukba: { icon: 'üôà', label: 'Cilukba!', color: 'bg-cyan-200', text: 'text-cyan-800' } // <-- BARU
            };

            // --- 4. State Aplikasi ---
            let activeDeck = 'hewan'; 
            let currentIndices = {};
            Object.keys(decks).forEach(key => {
                currentIndices[key] = 0;
            });
            
            // BARU: State untuk mode permainan
            let currentGameMode = 'flashcard'; // 'flashcard' atau 'cilukba'
            let isCilukbaHidden = true; 
            
            // --- 5. Logika Suara ---
            let voices = [];
            let femaleIndonesianVoice = null;

            function loadVoices() {
                voices = window.speechSynthesis.getVoices();
                femaleIndonesianVoice = voices.find(voice => 
                    voice.lang === 'id-ID' && 
                    (voice.name.includes('Female') || voice.name.includes('Wanita'))
                );
                
                if (!femaleIndonesianVoice) {
                    femaleIndonesianVoice = voices.find(voice => voice.lang === 'id-ID');
                }
            }
            
            function speak(text) {
                window.speechSynthesis.cancel();
                const utterance = new SpeechSynthesisUtterance(text);
                utterance.lang = 'id-ID';
                utterance.rate = 0.9;
                
                if (femaleIndonesianVoice) {
                    utterance.voice = femaleIndonesianVoice;
                }
                
                window.speechSynthesis.speak(utterance);
            }

            // --- 6. Logika Tampilan ---
            
            function showHomeScreen() {
                homeScreen.classList.remove('hidden-screen');
                cardScreen.classList.add('hidden-screen');
                currentGameMode = 'flashcard'; // Reset mode saat kembali ke home
            }
            
            function showCardScreen(deckName) {
                // Tidak perlu cek (if (!decks[deckName])) karena 'cilukba' tidak ada di 'decks'
                
                homeScreen.classList.add('hidden-screen');
                cardScreen.classList.remove('hidden-screen');
                
                if (deckName === 'cilukba') {
                    // --- MODE CILUKBA ---
                    currentGameMode = 'cilukba';
                    isCilukbaHidden = true;
                    // Tampilkan kartu "Ciluk" pertama
                    const cilukCard = { emoji: 'üôà', text: 'Ciluuuk...', bgColor: 'bg-gray-200', textColor: 'text-gray-800' };
                    showCardUI(cilukCard);
                    speak(cilukCard.text);
                } else {
                    // --- MODE FLASHCARD ---
                    currentGameMode = 'flashcard';
                    activeDeck = deckName;
                    currentIndices[activeDeck] = 0; // Reset ke kartu pertama
                    
                    const deck = decks[activeDeck];
                    const card = deck[0];
                    showCardUI(card); 
                    speak(card.text); 
                }
            }
            
            function showCardUI(card) {
                if (!cardElement || !emojiElement) { return; }

                cardElement.classList.remove(...allColorClasses);
                cardElement.classList.remove('animate-pop');
                emojiElement.classList.remove('animate-jiggle');

                cardElement.classList.add(card.bgColor, card.textColor);
                
                emojiElement.textContent = card.emoji;
                textElement.textContent = card.text;
                
                void cardElement.offsetWidth; 
                cardElement.classList.add('animate-pop');
                
                void emojiElement.offsetWidth;
                emojiElement.classList.add('animate-jiggle');
            }

            // Fungsi ini HANYA untuk mode flashcard
            function advanceCardAndSpeak() {
                const deck = decks[activeDeck];
                currentIndices[activeDeck] = (currentIndices[activeDeck] + 1) % deck.length;
                
                const newCard = deck[currentIndices[activeDeck]];
                showCardUI(newCard); // Perbarui UI
                speak(newCard.text); // Bicara
            }

            // --- 7. Logika Interaksi Kartu ---
            function createSparkles(x, y) {
                const sparkleEmojis = ['‚ú®', 'üåü', 'üí´', 'üíñ'];
                const sparkleCount = 7; 
                for (let i = 0; i < sparkleCount; i++) {
                    const sparkle = document.createElement('span');
                    sparkle.classList.add('sparkle');
                    sparkle.textContent = sparkleEmojis[Math.floor(Math.random() * sparkleEmojis.length)];
                    sparkle.style.fontSize = `${Math.random() * 1.5 + 0.75}rem`; 
                    const randomX = x + (Math.random() - 0.5) * 40; 
                    const randomY = y + (Math.random() - 0.5) * 40; 
                    sparkle.style.left = `${randomX}px`;
                    sparkle.style.top = `${randomY}px`;
                    sparkle.addEventListener('animationend', () => sparkle.remove());
                    cardElement.appendChild(sparkle);
                }
            }

            function handleCardClick(event) {
                // Tampilkan Efek Bintang
                const rect = cardElement.getBoundingClientRect();
                const x = event.clientX - rect.left;
                const y = event.clientY - rect.top;
                createSparkles(x, y);

                // BARU: Cek mode permainan
                if (currentGameMode === 'flashcard') {
                    advanceCardAndSpeak(); // <-- Logika lama
                } else if (currentGameMode === 'cilukba') {
                    // --- Logika Cilukba ---
                    if (isCilukbaHidden) {
                        // Tampilkan "Ba!"
                        const baCard = { emoji: 'üòÉ', text: 'BAA!', bgColor: 'bg-yellow-200', textColor: 'text-yellow-800' };
                        showCardUI(baCard);
                        speak(baCard.text);
                        isCilukbaHidden = false;
                    } else {
                        // Tampilkan "Ciluk" lagi
                        const cilukCard = { emoji: 'üôà', text: 'Ciluuuk...', bgColor: 'bg-gray-200', textColor: 'text-gray-800' };
                        showCardUI(cilukCard);
                        speak(cilukCard.text);
                        isCilukbaHidden = true;
                    }
                }
            }

            function handleCardKeydown(event) {
                if (event.code === 'Enter' || event.code === 'Space') {
                    event.preventDefault(); 
                    
                    // Tampilkan Efek Bintang (dari tengah emoji)
                    const emojiRect = emojiElement.getBoundingClientRect();
                    const cardRect = cardElement.getBoundingClientRect();
                    const x = (emojiRect.left + emojiRect.width / 2) - cardRect.left;
                    const y = (emojiRect.top + emojiRect.height / 2) - cardRect.top;
                    createSparkles(x, y);

                    // BARU: Cek mode permainan
                    if (currentGameMode === 'flashcard') {
                        advanceCardAndSpeak(); // <-- Logika lama
                    } else if (currentGameMode === 'cilukba') {
                        // --- Logika Cilukba ---
                        if (isCilukbaHidden) {
                            const baCard = { emoji: 'üòÉ', text: 'BAA!', bgColor: 'bg-yellow-200', textColor: 'text-yellow-800' };
                            showCardUI(baCard);
                            speak(baCard.text);
                            isCilukbaHidden = false;
                        } else {
                            const cilukCard = { emoji: 'üôà', text: 'Ciluuuk...', bgColor: 'bg-gray-200', textColor: 'text-gray-800' };
                            showCardUI(cilukCard);
                            speak(cilukCard.text);
                            isCilukbaHidden = true;
                        }
                    }
                }
            }


            // --- 8. Logika Inisialisasi ---
            function createFlowers() {
                const flowerEmojis = ['üå∏', 'üå∑', 'üåπ', 'üåº', 'üå∫'];
                const flowerCount = 20;
                for (let i = 0; i < flowerCount; i++) {
                    const flower = document.createElement('span');
                    flower.classList.add('flower');
                    flower.style.left = `${Math.random() * 100}vw`;
                    flower.style.animationDuration = `${Math.random() * 5 + 5}s`; 
                    flower.style.animationDelay = `${Math.random()* 5}s`;
                    flower.style.fontSize = `${Math.random() * 1.5 + 0.5}rem`; 
                    flower.textContent = flowerEmojis[Math.floor(Math.random() * flowerEmojis.length)];
                    flowerContainer.appendChild(flower);
                }
            }

            function initApp() {
                // Pasang event listener
                cardElement.addEventListener('click', handleCardClick); 
                cardElement.addEventListener('keydown', handleCardKeydown);
                backButton.addEventListener('click', showHomeScreen); 
                
                // Muat suara
                loadVoices();
                if (window.speechSynthesis.onvoiceschanged !== undefined) {
                    window.speechSynthesis.onvoiceschanged = loadVoices;
                }

                // Buat tombol menu di Layar Utama
                homeMenuContainer.innerHTML = ''; // Kosongkan dulu
                
                // BARU: Daftar urutan tombol
                const homeScreenButtonOrder = [
                    'hewan', 'warna', 'angka', 'huruf', 
                    'benda', 'buah', 'tubuh', 'bentuk', 
                    'cilukba' // <-- Tombol baru
                ];

                homeScreenButtonOrder.forEach(deckName => {
                    const config = buttonConfig[deckName];
                    if (config) { // Cek jika konfigurasi ada
                        const button = document.createElement('button');
                        button.className = `flex flex-col items-center justify-center p-4 rounded-2xl shadow-lg transform transition-transform active:scale-95 ${config.color} ${config.text}`;
                        button.innerHTML = `
                            <span class="text-6xl">${config.icon}</span>
                            <span class="mt-2 text-xl font-semibold">${config.label}</span>
                        `;
                        button.onclick = () => showCardScreen(deckName);
                        homeMenuContainer.appendChild(button);
                    }
                });

                // Buat bunga
                createFlowers();

                // Tampilkan layar utama saat aplikasi dimuat
                showHomeScreen();
            }

// --- 9. Jalankan Aplikasi ---
            initApp();
            
        }); 

        
        
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('/sw.js')
                    .then(registration => {
                        console.log('ServiceWorker PWA berhasil didaftarkan: ', registration);
                    })
                    .catch(error => {
                        console.log('Pendaftaran ServiceWorker PWA gagal: ', error);
                    });
            });
        }
    </script>
</body>
</html>

